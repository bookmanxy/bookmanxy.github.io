---
layout: post
title:  "mysql清空表方案"
categories: 数据库
tags:  mysql
author: watermelon
---
* content
{:toc}

![mysql清空表方案](https://images.gitee.com/uploads/images/2019/0129/140239_1e240ff4_1210188.jpeg)
## 前言
最近因业务需要，重构业务核心，对老业务表进行拆表跑数据。在testapi环境经历过一波试跑后信心满满准备正式生产环境开跑。






### 1：为什么
试跑数据产生了近100万条，需要清空表后重新跑。考虑选一个清空库表的最优方案。

### 2：是什么
目前方案有两种：
* 方法一：使用 delete from [表名]    生成日志
* 方法二：使用 truncate table [表名]    无日志生成
* 方法三：使用 truncate table [表名]    无日志生成

两种方式，前者更慢一点，真的是删除数据，好处就是可筛选删除。后者直接

### 3：原理剖析
* delete  
DELETE语句执行删除的过程是每次从表中删除一行，并且同时将该行的删除操作作为事务记录在日志中保存以便进行进行回滚操作。

* truncate
一次性地从表中删除所有的数据并不把单独的删除操作记录记入日志保存，删除行是不能恢复的。并且在删除的过程中不会激活与表有关的删除触发器。执行速度快。

* drop

name | 价格 |  数量  
-|-|-
香蕉 | $1 | 5 |
苹果 | $1 | 6 |
草莓 | $1 | 7 |

引用：


